<ion-menu side="end" contentId="main-content" menuId="menu-end">
  <ion-header>
    <ion-toolbar color="primary">
      <ion-title>Menú</ion-title>
    </ion-toolbar>
  </ion-header>

  <ion-content>
    <ion-list>
      <ion-item button (click)="verCitas()">
        <ion-icon name="calendar" slot="start"></ion-icon>
        <ion-label>Ver citas</ion-label>
      </ion-item>
      <ion-item button (click)="publicarPropiedad()">
        <ion-icon name="home" slot="start"></ion-icon>
        <ion-label>Publicar propiedad</ion-label>
      </ion-item>
      <ion-item button (click)="cerrarSesion()">
        <ion-icon name="log-out" slot="start"></ion-icon>
        <ion-label>Cerrar sesión</ion-label>
      </ion-item>
    </ion-list>
  </ion-content>
</ion-menu>

<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home-propietario"></ion-back-button>
    </ion-buttons>
    <ion-title>Mis Citas</ion-title>
    <ion-buttons slot="end">
      <ion-menu-button menu="menu-end"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" id="main-content">
  <ion-list>
    <ion-card *ngFor="let cita of citas">
      <ion-card-header>
        <ion-card-title>{{ cita.titulo }}</ion-card-title>
        <ion-card-subtitle>
          📅 {{ cita.fecha | date:'fullDate' }} - ⏰ {{ cita.hora }}
        </ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <p><strong>👤 Cliente:</strong> {{ cita.cliente }}</p>
        <p><strong>📍 Ubicación:</strong> {{ cita.ubicacion }}</p>
        <p><strong>📋 Detalles:</strong> {{ cita.detalles }}</p>
      </ion-card-content>
      <ion-row class="ion-justify-content-around">
        <ion-button color="success" (click)="aceptarCita(cita.id)">
          <ion-icon name="checkmark-circle"></ion-icon> Aceptar
        </ion-button>
        <ion-button color="danger" (click)="rechazarCita(cita.id)">
          <ion-icon name="close-circle"></ion-icon> Rechazar
        </ion-button>
      </ion-row>
    </ion-card>
  </ion-list>
  <ion-refresher slot="fixed" (ionRefresh)="refreshCitas($event)">
    <ion-refresher-content pullingText="Desliza para actualizar..."></ion-refresher-content>
  </ion-refresher>
</ion-content>