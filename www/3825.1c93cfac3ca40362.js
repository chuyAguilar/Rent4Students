"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3825],{3825:(M,u,a)=>{a.r(u),a.d(u,{RegisterPageModule:()=>_});var p=a(177),c=a(4341),s=a(7125),m=a(6454),d=a(467),e=a(9498),h=a(2872),f=a(8472);const P=[{path:"",component:(()=>{var o;class l{constructor(t,n,i,r){this.navCtrl=t,this.authService=n,this.loadingController=i,this.alertController=r,this.user="",this.email="",this.password="",this.confirmPassword="",this.userType="",this.isFormValid=!1,this.passwordType="password",this.confirmPasswordType="password"}ngOnInit(){const t=localStorage.getItem("userData");if(t){const n=JSON.parse(t);n&&n.userType&&("propietario"===n.userType?this.navCtrl.navigateForward("/home-propietario"):"quiero-rentar"===n.userType&&this.navCtrl.navigateForward("/search"))}}onBack(){this.navCtrl.back()}validateForm(){this.isFormValid=""!==this.user.trim()&&""!==this.email.trim()&&""!==this.password.trim()&&""!==this.confirmPassword.trim()&&""!==this.userType.trim()&&this.password===this.confirmPassword}togglePasswordVisibility(t){"password"===t?this.passwordType="password"===this.passwordType?"text":"password":"confirmPassword"===t&&(this.confirmPasswordType="password"===this.confirmPasswordType?"text":"password")}showErrorAlert(t){var n=this;return(0,d.A)(function*(){yield(yield n.alertController.create({header:"Error",message:t,buttons:["Aceptar"]})).present()})()}checkEmailExists(t){var n=this;return(0,d.A)(function*(){try{return null!==(yield n.authService.login(t,n.password))}catch{return!1}})()}register(){var t=this;return(0,d.A)(function*(){if(!t.isFormValid)return void t.showErrorAlert("Por favor, completa todos los campos correctamente.");if(!/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/.test(t.password))return void t.showErrorAlert("La contrase\xf1a debe tener al menos 8 caracteres, una may\xfascula, una min\xfascula y un n\xfamero.");if(yield t.checkEmailExists(t.email))return void t.showErrorAlert("El correo electr\xf3nico ya est\xe1 en uso.");const i=yield t.loadingController.create({message:"Registrando usuario...",spinner:"bubbles",cssClass:"custom-spinner"});yield i.present();try{const r=yield t.authService.register(t.email,t.password,t.userType,t.user);r&&(console.log("Usuario registrado:",r),setTimeout(()=>{t.navCtrl.navigateForward("/login")},500))}catch(r){t.showErrorAlert("Error en el registro: "+r.message)}finally{yield i.dismiss()}})()}navigateToLogin(){this.navCtrl.navigateForward("/login")}}return(o=l).\u0275fac=function(t){return new(t||o)(e.rXU(h.q9),e.rXU(f.u),e.rXU(s.Xi),e.rXU(s.hG))},o.\u0275cmp=e.VBU({type:o,selectors:[["app-register"]],decls:35,vars:10,consts:[[1,"register-content"],[1,"register-container"],[1,"register-card"],["name","person-outline","slot","start"],["placeholder","Usuario",3,"ngModelChange","ionInput","ngModel"],["name","mail-outline","slot","start"],["placeholder","Correo",3,"ngModelChange","ionInput","ngModel"],["name","lock-closed-outline","slot","start"],["placeholder","Contrase\xf1a",3,"ngModelChange","ngModel","type"],["fill","clear",3,"click"],[3,"name"],["placeholder","Confirmar contrase\xf1a",3,"ngModelChange","ngModel","type"],["placeholder","Seleccionar rol",3,"ngModelChange","ionChange","ngModel"],["value","propietario"],["value","quiero-rentar"],["expand","full","color","success",3,"click","disabled"],[1,"login-text"],[1,"login-link",3,"click"]],template:function(t,n){1&t&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"ion-card",2)(3,"ion-card-header")(4,"h1"),e.EFF(5,"HOME 4 STUDENTS"),e.k0s()(),e.j41(6,"ion-card-content")(7,"ion-item"),e.nrm(8,"ion-icon",3),e.j41(9,"ion-input",4),e.mxI("ngModelChange",function(r){return e.DH7(n.user,r)||(n.user=r),r}),e.bIt("ionInput",function(){return n.validateForm()}),e.k0s()(),e.j41(10,"ion-item"),e.nrm(11,"ion-icon",5),e.j41(12,"ion-input",6),e.mxI("ngModelChange",function(r){return e.DH7(n.email,r)||(n.email=r),r}),e.bIt("ionInput",function(){return n.validateForm()}),e.k0s()(),e.j41(13,"ion-item"),e.nrm(14,"ion-icon",7),e.j41(15,"ion-input",8),e.mxI("ngModelChange",function(r){return e.DH7(n.password,r)||(n.password=r),r}),e.k0s(),e.j41(16,"ion-button",9),e.bIt("click",function(){return n.togglePasswordVisibility("password")}),e.nrm(17,"ion-icon",10),e.k0s()(),e.j41(18,"ion-item"),e.nrm(19,"ion-icon",7),e.j41(20,"ion-input",11),e.mxI("ngModelChange",function(r){return e.DH7(n.confirmPassword,r)||(n.confirmPassword=r),r}),e.k0s(),e.j41(21,"ion-button",9),e.bIt("click",function(){return n.togglePasswordVisibility("confirmPassword")}),e.nrm(22,"ion-icon",10),e.k0s()(),e.j41(23,"ion-item")(24,"ion-select",12),e.mxI("ngModelChange",function(r){return e.DH7(n.userType,r)||(n.userType=r),r}),e.bIt("ionChange",function(){return n.validateForm()}),e.j41(25,"ion-select-option",13),e.EFF(26,"Propietario"),e.k0s(),e.j41(27,"ion-select-option",14),e.EFF(28,"Quiero rentar (Estudiante)"),e.k0s()()(),e.j41(29,"ion-button",15),e.bIt("click",function(){return n.register()}),e.EFF(30," CREAR CUENTA "),e.k0s(),e.j41(31,"ion-text",16),e.EFF(32," \xbfYa tienes cuenta? "),e.j41(33,"span",17),e.bIt("click",function(){return n.navigateToLogin()}),e.EFF(34,"Inicia sesi\xf3n"),e.k0s()()()()()()),2&t&&(e.R7$(9),e.R50("ngModel",n.user),e.R7$(3),e.R50("ngModel",n.email),e.R7$(3),e.R50("ngModel",n.password),e.Y8G("type",n.passwordType),e.R7$(2),e.Y8G("name","password"===n.passwordType?"eye-outline":"eye-off-outline"),e.R7$(3),e.R50("ngModel",n.confirmPassword),e.Y8G("type",n.confirmPasswordType),e.R7$(2),e.Y8G("name","password"===n.confirmPasswordType?"eye-outline":"eye-off-outline"),e.R7$(2),e.R50("ngModel",n.userType),e.R7$(5),e.Y8G("disabled",!n.isFormValid))},dependencies:[p.MD,s.bv,s.Jm,s.b_,s.I9,s.ME,s.W9,s.iq,s.$w,s.uz,s.Nm,s.Ip,s.IO,s.Je,s.Gw,c.YN,c.BC,c.vS],styles:[".register-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f8f8f8}.register-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center;height:100vh}.register-card[_ngcontent-%COMP%]{width:90%;max-width:400px;padding:20px;text-align:center;border-radius:10px;box-shadow:0 4px 10px #0000001a}.register-container[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#2c3e50}.custom-spinner[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]{background:#000c;color:#fff;border-radius:10px}.custom-spinner[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{--color: #FFD700}ion-alert[_ngcontent-%COMP%]   .alert-head[_ngcontent-%COMP%]{background-color:#ff3b30;color:#fff}.login-text[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:16px}.login-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer;font-weight:600}.login-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#0056b3}@media (min-width: 768px) and (max-width: 1024px){.register-card[_ngcontent-%COMP%]{max-width:80%;padding:18px}h1[_ngcontent-%COMP%]{font-size:1.5rem}}@media (min-width: 1025px){.register-card[_ngcontent-%COMP%]{max-width:400px;padding:20px}h1[_ngcontent-%COMP%]{font-size:1.75rem}ion-item[_ngcontent-%COMP%]{--border-radius: 8px;margin-bottom:10px}}@media (min-width: 1025px) and (max-width: 600px){.register-card[_ngcontent-%COMP%]{padding:15px}.login-text[_ngcontent-%COMP%]{font-size:.8rem}}"]}),l})()}];let C=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[m.iI.forChild(P),m.iI]}),l})(),_=(()=>{var o;class l{}return(o=l).\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.$C({type:o}),o.\u0275inj=e.G2t({imports:[p.MD,c.YN,s.bv,C]}),l})()}}]);