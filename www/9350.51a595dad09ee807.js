"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9350],{6969:(M,f,r)=>{r.r(f),r.d(f,{DetallePageModule:()=>j});var g=r(177),h=r(4341),s=r(7125),u=r(6454),v=r(467),e=r(9498),F=r(2872),I=r(8472);function P(t,o){if(1&t){const n=e.RV6();e.j41(0,"img",10),e.bIt("error",function(){e.eBV(n);const i=e.XpG(2);return e.Njj(i.handleImageError())}),e.k0s()}if(2&t){const n=e.XpG(2);e.Y8G("src",n.propiedad.imagenes[n.imagenActualIndex],e.B4B)}}function D(t,o){if(1&t){const n=e.RV6();e.j41(0,"div",7)(1,"button",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cambiarImagen(-1))}),e.EFF(2,"\u276e"),e.k0s(),e.DNE(3,P,1,1,"img",9),e.j41(4,"button",8),e.bIt("click",function(){e.eBV(n);const i=e.XpG();return e.Njj(i.cambiarImagen(1))}),e.EFF(5,"\u276f"),e.k0s()()}if(2&t){const n=e.XpG();e.R7$(3),e.Y8G("ngIf",n.imagenActualIndex<n.propiedad.imagenes.length)}}function b(t,o){1&t&&(e.j41(0,"li"),e.EFF(1,"\u2705 Agua"),e.k0s())}function E(t,o){1&t&&(e.j41(0,"li"),e.EFF(1,"\u2705 Luz"),e.k0s())}function _(t,o){1&t&&(e.j41(0,"li"),e.EFF(1,"\u2705 Internet"),e.k0s())}function k(t,o){1&t&&(e.j41(0,"li"),e.EFF(1,"\u2705 Gas"),e.k0s())}const x=[{path:"",component:(()=>{var t;class o{constructor(a,i,l,d){this.navCtrl=a,this.alertCtrl=i,this.router=l,this.authService=d,this.propiedad={imagenes:[]},this.imagenActualIndex=0}ngOnInit(){var a=this;return(0,v.A)(function*(){const i=localStorage.getItem("userData");if(!i)return void a.navCtrl.navigateRoot("/login");const l=JSON.parse(i);if(l&&"quiero-rentar"===l.userType){var d;const m=a.router.getCurrentNavigation(),c=null==m||null===(d=m.extras)||void 0===d||null===(d=d.state)||void 0===d?void 0:d.id;if(console.log("ID recibido en Detalle:",c),!c)return void a.navCtrl.navigateBack(["/search"]);try{const p=yield a.authService.getPropertyById(c);p?(a.propiedad={id:c,...p},a.propiedad.imagenes&&a.propiedad.imagenes.length>0&&(a.imagenActualIndex=0),console.log("Propiedad obtenida:",a.propiedad),a.loadMap()):a.navCtrl.navigateBack(["/search"])}catch(p){console.error("Error al obtener la propiedad:",p),a.navCtrl.navigateBack(["/search"])}}else a.navCtrl.navigateRoot("/login")})()}loadMap(){if(typeof google<"u"&&google.maps)if(this.propiedad.latitud&&this.propiedad.longitud){const a=document.getElementById("map"),i=new google.maps.Map(a,{center:{lat:this.propiedad.latitud,lng:this.propiedad.longitud},zoom:14});new google.maps.Marker({position:{lat:this.propiedad.latitud,lng:this.propiedad.longitud},map:i,title:"Ubicaci\xf3n de la propiedad"})}else console.error("Faltan las coordenadas de latitud o longitud.");else console.error("Google Maps API no est\xe1 disponible.")}rentar(){var a=this;return(0,v.A)(function*(){yield(yield a.alertCtrl.create({header:"Confirmaci\xf3n",message:"\xbfQuieres agendar una cita antes de rentar?",buttons:[{text:"S\xed, agendar cita",handler:()=>{console.log("ID enviado a solicitarvisita:",a.propiedad.id),a.navCtrl.navigateForward(["/solicitarvisita"],{queryParams:{id:a.propiedad.id}})}},{text:"No, ir al contrato",handler:()=>{console.log("ID enviado a contrato:",a.propiedad.id),a.navCtrl.navigateForward(["/contrato"],{queryParams:{id:a.propiedad.id}})}}]})).present()})()}cambiarImagen(a){var i;const l=(null===(i=this.propiedad.imagenes)||void 0===i?void 0:i.length)||0;l>0&&(this.imagenActualIndex=(this.imagenActualIndex+a+l)%l)}handleImageError(){console.error("Error: La imagen no se pudo cargar:",this.propiedad.imagenes[this.imagenActualIndex])}}return(t=o).\u0275fac=function(a){return new(a||t)(e.rXU(F.q9),e.rXU(s.hG),e.rXU(u.Ix),e.rXU(I.u))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-detalle"]],standalone:!1,decls:47,vars:14,consts:[[1,"container"],["class","carousel-container",4,"ngIf"],[1,"info-card"],[4,"ngIf"],["id","map",2,"height","300px","width","100%"],[1,"botones"],[3,"click"],[1,"carousel-container"],[1,"carousel-button",3,"click"],[3,"src","error",4,"ngIf"],[3,"error","src"]],template:function(a,i){1&a&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3),e.nI1(4,"uppercase"),e.k0s()()(),e.j41(5,"ion-content")(6,"div",0),e.DNE(7,D,6,1,"div",1),e.j41(8,"ion-card",2)(9,"ion-card-content")(10,"h2"),e.EFF(11,"Servicios"),e.k0s(),e.j41(12,"ul"),e.DNE(13,b,2,0,"li",3)(14,E,2,0,"li",3)(15,_,2,0,"li",3)(16,k,2,0,"li",3),e.k0s(),e.j41(17,"h3"),e.EFF(18,"Especificaciones"),e.k0s(),e.j41(19,"p")(20,"strong"),e.EFF(21,"Tipo:"),e.k0s(),e.EFF(22),e.k0s(),e.j41(23,"p")(24,"strong"),e.EFF(25,"Habitaciones:"),e.k0s(),e.EFF(26),e.k0s(),e.j41(27,"p")(28,"strong"),e.EFF(29,"Ba\xf1os:"),e.k0s(),e.EFF(30),e.k0s(),e.j41(31,"p")(32,"strong"),e.EFF(33,"Estacionamiento:"),e.k0s(),e.EFF(34),e.k0s(),e.j41(35,"p")(36,"strong"),e.EFF(37,"Descripcion:"),e.k0s(),e.EFF(38),e.k0s(),e.j41(39,"h3"),e.EFF(40," Total: "),e.j41(41,"strong"),e.EFF(42),e.k0s()(),e.nrm(43,"div",4),e.j41(44,"div",5)(45,"ion-button",6),e.bIt("click",function(){return i.rentar()}),e.EFF(46,"RENTAR"),e.k0s()()()()()()),2&a&&(e.R7$(3),e.SpI(" ",i.propiedad.tipo?e.bMT(4,12,i.propiedad.tipo):"PROPIEDAD"," "),e.R7$(4),e.Y8G("ngIf",(null==i.propiedad||null==i.propiedad.imagenes?null:i.propiedad.imagenes.length)>0),e.R7$(6),e.Y8G("ngIf",null==i.propiedad.servicios?null:i.propiedad.servicios.agua),e.R7$(),e.Y8G("ngIf",null==i.propiedad.servicios?null:i.propiedad.servicios.luz),e.R7$(),e.Y8G("ngIf",null==i.propiedad.servicios?null:i.propiedad.servicios.internet),e.R7$(),e.Y8G("ngIf",null==i.propiedad.servicios?null:i.propiedad.servicios.gas),e.R7$(6),e.SpI(" ",i.propiedad.tipo||"No especificado",""),e.R7$(4),e.SpI(" ",i.propiedad.habitaciones||"No especificado",""),e.R7$(4),e.SpI(" ",i.propiedad.banos||"No especificado",""),e.R7$(4),e.SpI(" ",i.propiedad.estacionamiento||"No especificado",""),e.R7$(4),e.SpI(" ",i.propiedad.especificaciones_adicionales||"No disponible",""),e.R7$(4),e.SpI("$",i.propiedad.precio||"0","/mes"))},dependencies:[g.bT,s.Jm,s.b_,s.I9,s.W9,s.eU,s.BC,s.ai,g.Pc],styles:['@charset "UTF-8";.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:16px}.carousel-container[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;max-width:100%;margin-bottom:16px}.carousel-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;max-width:350px;height:auto;border-radius:10px;box-shadow:2px 4px 8px #0003}.carousel-button[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#333;padding:10px}.carousel-button[_ngcontent-%COMP%]:hover{color:#007bff}.info-card[_ngcontent-%COMP%]{width:90%;max-width:400px;border-radius:12px;box-shadow:2px 2px 10px #0000001a;background:#fff}.servicios[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:8px}.servicios[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}ion-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px}.info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.botones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-top:16px}']}),o})()}];let C=(()=>{var t;class o{}return(t=o).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[u.iI.forChild(x),u.iI]}),o})(),j=(()=>{var t;class o{}return(t=o).\u0275fac=function(a){return new(a||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[g.MD,h.YN,s.bv,C]}),o})()}}]);