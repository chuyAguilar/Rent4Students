"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6499],{6499:(R,g,s)=>{s.r(g),s.d(g,{HomePropietarioPageModule:()=>v});var d=s(177),m=s(4341),r=s(7125),_=s(6454),u=s(467),e=s(9498);function y(i,p){if(1&i&&(e.j41(0,"div",24),e.nrm(1,"img",25),e.k0s()),2&i){const l=p.$implicit,n=p.index;e.R7$(),e.Mz_("alt","Imagen ",n,""),e.Y8G("src",l,e.B4B)}}function F(i,p){if(1&i&&(e.j41(0,"div",22),e.DNE(1,y,2,3,"div",23),e.k0s()),2&i){const l=e.XpG();e.R7$(),e.Y8G("ngForOf",l.propertyImages)}}function h(i,p){if(1&i){const l=e.RV6();e.j41(0,"ion-item")(1,"ion-label"),e.EFF(2,"Sube tu documento:"),e.k0s(),e.j41(3,"input",26),e.bIt("change",function(o){e.eBV(l);const a=e.XpG();return e.Njj(a.onFileSelected(o))}),e.k0s()()}}function P(i,p){if(1&i&&(e.j41(0,"div",27),e.nrm(1,"img",28),e.k0s()),2&i){const l=e.XpG();e.R7$(),e.Y8G("src",l.property.documentPreview,e.B4B)}}let k=(()=>{var i;class p{constructor(n){this.modalController=n,this.propertyImages=[]}ngOnInit(){this.property&&this.property.imagenes&&(this.propertyImages=[...this.property.imagenes])}onImageSelected(n){const o=n.target.files;if(o)for(let a of o){const t=new FileReader;t.onload=c=>{this.propertyImages.push(c.target.result),this.property.imagenes=this.propertyImages},t.readAsDataURL(a)}}onFileSelected(n){const o=n.target.files[0];if(o){const a=new FileReader;a.onload=t=>{this.property.documentPreview=t.target.result,this.property.document=t.target.result},a.readAsDataURL(o)}}dismiss(){this.modalController.dismiss()}update(){this.modalController.dismiss({updatedProperty:this.property})}}return(i=p).\u0275fac=function(n){return new(n||i)(e.rXU(r.W3))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-property-update-modal"]],inputs:{property:"property"},decls:97,vars:15,consts:[["slot","end"],[3,"click"],[1,"ion-padding"],["type","file","multiple","","accept","image/*",3,"change"],["class","image-preview-container",4,"ngIf"],[3,"ngModelChange","ngModel"],["slot","start","value","casa"],["slot","start","value","departamento"],["slot","start","value","cuarto"],["position","stacked"],["type","number","placeholder","Ingresa el precio",3,"ngModelChange","ngModel"],["value","1"],["value","2"],["value","3"],["value","4+"],["value","3+"],["value","0"],["value","2+"],["placeholder","Escribe aqu\xed detalles adicionales",3,"ngModelChange","ngModel"],[4,"ngIf"],["class","document-preview",4,"ngIf"],["expand","full",3,"click"],[1,"image-preview-container"],["class","image-preview",4,"ngFor","ngForOf"],[1,"image-preview"],[2,"width","100px","height","auto",3,"src","alt"],["type","file","accept","image/*",3,"change"],[1,"document-preview"],["alt","Documento",2,"width","100px","height","auto",3,"src"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Actualizar Propiedad"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return o.dismiss()}),e.EFF(6,"Cerrar"),e.k0s()()()(),e.j41(7,"ion-content",2)(8,"ion-item")(9,"ion-label"),e.EFF(10,"Subir Im\xe1genes"),e.k0s(),e.j41(11,"input",3),e.bIt("change",function(t){return o.onImageSelected(t)}),e.k0s()(),e.DNE(12,F,2,1,"div",4),e.j41(13,"ion-item")(14,"ion-label"),e.EFF(15,"Tipo:"),e.k0s(),e.j41(16,"ion-radio-group",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.propertyType,t)||(o.property.propertyType=t),t}),e.j41(17,"ion-item"),e.nrm(18,"ion-radio",6),e.j41(19,"ion-label"),e.EFF(20,"Casa"),e.k0s()(),e.j41(21,"ion-item"),e.nrm(22,"ion-radio",7),e.j41(23,"ion-label"),e.EFF(24,"Departamento"),e.k0s()(),e.j41(25,"ion-item"),e.nrm(26,"ion-radio",8),e.j41(27,"ion-label"),e.EFF(28,"Cuarto"),e.k0s()()()(),e.j41(29,"ion-item")(30,"ion-label",9),e.EFF(31,"Precio"),e.k0s(),e.j41(32,"ion-input",10),e.mxI("ngModelChange",function(t){return e.DH7(o.property.price,t)||(o.property.price=t),t}),e.k0s()(),e.j41(33,"ion-item")(34,"ion-label"),e.EFF(35,"Habitaciones:"),e.k0s(),e.j41(36,"ion-select",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.rooms,t)||(o.property.rooms=t),t}),e.j41(37,"ion-select-option",11),e.EFF(38,"1"),e.k0s(),e.j41(39,"ion-select-option",12),e.EFF(40,"2"),e.k0s(),e.j41(41,"ion-select-option",13),e.EFF(42,"3"),e.k0s(),e.j41(43,"ion-select-option",14),e.EFF(44,"4+"),e.k0s()()(),e.j41(45,"ion-item")(46,"ion-label"),e.EFF(47,"Ba\xf1os:"),e.k0s(),e.j41(48,"ion-select",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.bathrooms,t)||(o.property.bathrooms=t),t}),e.j41(49,"ion-select-option",11),e.EFF(50,"1"),e.k0s(),e.j41(51,"ion-select-option",12),e.EFF(52,"2"),e.k0s(),e.j41(53,"ion-select-option",15),e.EFF(54,"3+"),e.k0s()()(),e.j41(55,"ion-item")(56,"ion-label"),e.EFF(57,"Estacionamiento:"),e.k0s(),e.j41(58,"ion-select",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.parking,t)||(o.property.parking=t),t}),e.j41(59,"ion-select-option",16),e.EFF(60,"No"),e.k0s(),e.j41(61,"ion-select-option",11),e.EFF(62,"1"),e.k0s(),e.j41(63,"ion-select-option",17),e.EFF(64,"2+"),e.k0s()()(),e.j41(65,"ion-item")(66,"ion-label",9),e.EFF(67,"Especificaciones adicionales"),e.k0s(),e.j41(68,"ion-textarea",18),e.mxI("ngModelChange",function(t){return e.DH7(o.property.additionalSpecs,t)||(o.property.additionalSpecs=t),t}),e.k0s()(),e.j41(69,"ion-item")(70,"ion-label"),e.EFF(71,"Servicios:"),e.k0s(),e.j41(72,"ion-checkbox",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.water,t)||(o.property.water=t),t}),e.k0s(),e.j41(73,"ion-label"),e.EFF(74,"Agua"),e.k0s(),e.j41(75,"ion-checkbox",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.electricity,t)||(o.property.electricity=t),t}),e.k0s(),e.j41(76,"ion-label"),e.EFF(77,"Luz"),e.k0s(),e.j41(78,"ion-checkbox",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.internet,t)||(o.property.internet=t),t}),e.k0s(),e.j41(79,"ion-label"),e.EFF(80,"Internet"),e.k0s(),e.j41(81,"ion-checkbox",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.gas,t)||(o.property.gas=t),t}),e.k0s(),e.j41(82,"ion-label"),e.EFF(83,"Gas"),e.k0s()(),e.j41(84,"ion-item")(85,"ion-label"),e.EFF(86,"Documento:"),e.k0s(),e.j41(87,"ion-checkbox",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.ineSelected,t)||(o.property.ineSelected=t),t}),e.k0s(),e.j41(88,"ion-label"),e.EFF(89,"INE"),e.k0s(),e.j41(90,"ion-checkbox",5),e.mxI("ngModelChange",function(t){return e.DH7(o.property.passportSelected,t)||(o.property.passportSelected=t),t}),e.k0s(),e.j41(91,"ion-label"),e.EFF(92,"Pasaporte"),e.k0s()(),e.DNE(93,h,4,0,"ion-item",19)(94,P,2,1,"div",20),e.j41(95,"ion-button",21),e.bIt("click",function(){return o.update()}),e.EFF(96,"Actualizar Propiedad"),e.k0s()()),2&n&&(e.R7$(12),e.Y8G("ngIf",null==o.propertyImages?null:o.propertyImages.length),e.R7$(4),e.R50("ngModel",o.property.propertyType),e.R7$(16),e.R50("ngModel",o.property.price),e.R7$(4),e.R50("ngModel",o.property.rooms),e.R7$(12),e.R50("ngModel",o.property.bathrooms),e.R7$(10),e.R50("ngModel",o.property.parking),e.R7$(10),e.R50("ngModel",o.property.additionalSpecs),e.R7$(4),e.R50("ngModel",o.property.water),e.R7$(3),e.R50("ngModel",o.property.electricity),e.R7$(3),e.R50("ngModel",o.property.internet),e.R7$(3),e.R50("ngModel",o.property.gas),e.R7$(6),e.R50("ngModel",o.property.ineSelected),e.R7$(3),e.R50("ngModel",o.property.passportSelected),e.R7$(3),e.Y8G("ngIf",o.property.ineSelected||o.property.passportSelected),e.R7$(),e.Y8G("ngIf",o.property.documentPreview))},dependencies:[r.bv,r.Jm,r.QW,r.eY,r.W9,r.eU,r.$w,r.uz,r.he,r.KO,r.f0,r.Nm,r.Ip,r.nc,r.BC,r.ai,r.hB,r.su,r.Je,r.Gw,d.MD,d.Sq,d.bT,m.YN,m.BC,m.vS],encapsulation:2}),p})(),f=(()=>{var i;class p{constructor(n){this.modalController=n}dismiss(){this.modalController.dismiss()}confirmDelete(){this.modalController.dismiss({deleteConfirmed:!0})}}return(i=p).\u0275fac=function(n){return new(n||i)(e.rXU(r.W3))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-property-delete-modal"]],inputs:{property:"property"},decls:11,vars:1,consts:[[1,"ion-padding"],["expand","block","color","danger",3,"click"],["expand","block",3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Confirmar Eliminaci\xf3n"),e.k0s()()(),e.j41(4,"ion-content",0)(5,"p"),e.EFF(6),e.k0s(),e.j41(7,"ion-button",1),e.bIt("click",function(){return o.confirmDelete()}),e.EFF(8,"Eliminar"),e.k0s(),e.j41(9,"ion-button",2),e.bIt("click",function(){return o.dismiss()}),e.EFF(10,"Cancelar"),e.k0s()()),2&n&&(e.R7$(6),e.SpI('\xbfEst\xe1s seguro de que deseas eliminar la propiedad "',o.property.tipo,'"?'))},dependencies:[r.bv,r.Jm,r.W9,r.eU,r.BC,r.ai,d.MD],encapsulation:2}),p})();var C=s(8472),M=s(2872);function j(i,p){if(1&i&&e.nrm(0,"ion-img",13),2&i){const l=e.XpG().$implicit;e.Y8G("src",l.imagen)}}function b(i,p){if(1&i){const l=e.RV6();e.j41(0,"ion-card"),e.DNE(1,j,1,1,"ion-img",10),e.j41(2,"ion-card-header")(3,"ion-card-title"),e.EFF(4),e.k0s(),e.j41(5,"ion-card-subtitle"),e.EFF(6),e.k0s()(),e.j41(7,"ion-card-content")(8,"p")(9,"strong"),e.EFF(10,"Habitaciones:"),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"p")(13,"strong"),e.EFF(14,"Ba\xf1os:"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"p")(17,"strong"),e.EFF(18,"Estacionamiento:"),e.k0s(),e.EFF(19),e.k0s()(),e.j41(20,"ion-button",11),e.bIt("click",function(){const o=e.eBV(l).$implicit,a=e.XpG();return e.Njj(a.openUpdateModal(o))}),e.EFF(21,"Editar"),e.k0s(),e.j41(22,"ion-button",12),e.bIt("click",function(){const o=e.eBV(l).$implicit,a=e.XpG();return e.Njj(a.openDeleteModal(o))}),e.EFF(23,"Eliminar"),e.k0s()()}if(2&i){const l=p.$implicit;e.R7$(),e.Y8G("ngIf",l.imagen),e.R7$(3),e.Lme("",l.tipo," - $",l.precio,""),e.R7$(2),e.JRh(l.especificaciones_adicionales),e.R7$(5),e.SpI(" ",l.habitaciones,""),e.R7$(4),e.SpI(" ",l.banos,""),e.R7$(4),e.SpI(" ",l.estacionamiento,"")}}const E=[{path:"",component:(()=>{var i;class p{constructor(n,o,a){this.authService=n,this.modalController=o,this.navCtrl=a,this.userProperties=[]}ngOnInit(){this.checkUserAuthentication()}checkUserAuthentication(){var n=this;return(0,u.A)(function*(){const o=localStorage.getItem("userData");if(!o)return void n.navCtrl.navigateRoot("/login");const a=JSON.parse(o);a&&"propietario"===a.userType?n.loadUserProperties():n.navCtrl.navigateRoot("/login")})()}openUpdateModal(n){var o=this;return(0,u.A)(function*(){const a=yield o.modalController.create({component:k,componentProps:{property:{...n}}});yield a.present();const{data:t}=yield a.onWillDismiss();if(t&&t.updatedProperty)try{yield o.authService.updateProperty(n.id,t.updatedProperty),console.log("Propiedad actualizada correctamente"),o.loadUserProperties()}catch(c){console.error("Error al actualizar propiedad:",c)}})()}openDeleteModal(n){var o=this;return(0,u.A)(function*(){const a=yield o.modalController.create({component:f,componentProps:{property:n}});yield a.present();const{data:t}=yield a.onWillDismiss();if(t&&t.deleteConfirmed)try{yield o.authService.deleteProperty(n.id),console.log("Propiedad eliminada correctamente"),o.userProperties=o.userProperties.filter(c=>c.id!==n.id)}catch(c){console.error("Error al eliminar propiedad:",c)}})()}loadUserProperties(){var n=this;return(0,u.A)(function*(){try{n.userProperties=yield n.authService.getUserProperties(),console.log("Propiedades del usuario:",n.userProperties)}catch(o){console.error("Error al cargar propiedades:",o)}})()}verCitas(){this.navCtrl.navigateForward("/citas-propietario")}publicarPropiedad(){this.navCtrl.navigateForward("/property-upload")}cerrarSesion(){localStorage.removeItem("userData"),this.navCtrl.navigateRoot("/login")}verDetalle(n){this.navCtrl.navigateForward(["/detalle"],{state:{id:n.id}})}editarPropiedad(n){console.log("Editar propiedad:",n)}eliminarPropiedad(n){console.log("Eliminar propiedad:",n)}}return(i=p).\u0275fac=function(n){return new(n||i)(e.rXU(C.u),e.rXU(r.W3),e.rXU(M.q9))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-home-propietario"]],standalone:!1,decls:32,vars:1,consts:[["side","end","contentId","main-content"],["color","primary"],["button","",3,"click"],["name","calendar","slot","start"],["name","home","slot","start"],["name","log-out","slot","start"],["slot","end"],["autoHide","false"],["id","main-content",1,"ion-padding"],[4,"ngFor","ngForOf"],[3,"src",4,"ngIf"],["fill","clear",3,"click"],["fill","clear","color","danger",3,"click"],[3,"src"]],template:function(n,o){1&n&&(e.j41(0,"ion-menu",0)(1,"ion-header")(2,"ion-toolbar",1)(3,"ion-title"),e.EFF(4,"Men\xfa"),e.k0s()()(),e.j41(5,"ion-content")(6,"ion-list")(7,"ion-item",2),e.bIt("click",function(){return o.verCitas()}),e.nrm(8,"ion-icon",3),e.j41(9,"ion-label"),e.EFF(10,"Ver citas"),e.k0s()(),e.j41(11,"ion-item",2),e.bIt("click",function(){return o.publicarPropiedad()}),e.nrm(12,"ion-icon",4),e.j41(13,"ion-label"),e.EFF(14,"Publicar propiedad"),e.k0s()(),e.j41(15,"ion-item",2),e.bIt("click",function(){return o.cerrarSesion()}),e.nrm(16,"ion-icon",5),e.j41(17,"ion-label"),e.EFF(18,"Cerrar sesi\xf3n"),e.k0s()()()()(),e.j41(19,"ion-header")(20,"ion-toolbar",1)(21,"ion-buttons",6),e.nrm(22,"ion-menu-button",7),e.k0s(),e.j41(23,"ion-title"),e.EFF(24,"Home Propietario"),e.k0s()()(),e.j41(25,"ion-content",8)(26,"h2"),e.EFF(27,"Bienvenido, propietario"),e.k0s(),e.j41(28,"p"),e.EFF(29,"Aqu\xed puedes gestionar tus propiedades y citas."),e.k0s(),e.j41(30,"ion-list"),e.DNE(31,b,24,7,"ion-card",9),e.k0s()()),2&n&&(e.R7$(31),e.Y8G("ngForOf",o.userProperties))},dependencies:[d.Sq,d.bT,r.Jm,r.QW,r.b_,r.I9,r.ME,r.HW,r.tN,r.W9,r.eU,r.iq,r.KW,r.uz,r.he,r.nf,r.oS,r.MC,r.BC,r.ai],styles:["ion-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}h2[_ngcontent-%COMP%]{margin-top:20px;color:var(--ion-color-primary)}"]}),p})()}];let I=(()=>{var i;class p{}return(i=p).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[_.iI.forChild(E),_.iI]}),p})(),v=(()=>{var i;class p{}return(i=p).\u0275fac=function(n){return new(n||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[d.MD,m.YN,r.bv,I]}),p})()}}]);