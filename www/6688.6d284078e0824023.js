"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6688],{6688:(F,d,s)=>{s.r(d),s.d(d,{LoginPageModule:()=>M});var p=s(177),u=s(4341),r=s(7125),m=s(6454),h=s(467),e=s(9498),f=s(2872),v=s(8472);const C=[{path:"",component:(()=>{var t;class l{constructor(n,o,a,i){this.navCtrl=n,this.authService=o,this.loadingController=a,this.alertController=i,this.user="",this.password="",this.isFormValid=!1,this.isRedirecting=!0}ngOnInit(){const n=localStorage.getItem("userData");if(n){const o=JSON.parse(n);o&&o.userType&&("propietario"===o.userType?this.navCtrl.navigateForward("/home-propietario"):"quiero-rentar"===o.userType&&this.navCtrl.navigateForward("/search"))}else this.isRedirecting=!1}validateForm(){this.isFormValid=""!==this.user.trim()&&""!==this.password.trim()}showErrorAlert(n){var o=this;return(0,h.A)(function*(){yield(yield o.alertController.create({header:"Error",message:n,buttons:["Aceptar"]})).present()})()}login(){var n=this;return(0,h.A)(function*(){if(!n.isFormValid)return void n.showErrorAlert("Por favor, completa todos los campos correctamente.");if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(n.user))return void n.showErrorAlert("El formato del correo no es v\xe1lido.");const a=yield n.loadingController.create({message:"Iniciando sesi\xf3n...",spinner:"bubbles",cssClass:"custom-spinner"});yield a.present();try{const i=yield n.authService.login(n.user.trim(),n.password);if(i){console.log("Usuario autenticado:",i);const c=yield n.authService.getUserData(i.uid);if(c&&c.userType){console.log("Tipo de usuario:",c.userType);const y={userType:c.userType,email:n.user.trim()};localStorage.setItem("userData",JSON.stringify(y)),"propietario"===c.userType?n.navCtrl.navigateForward("/home-propietario"):"quiero-rentar"===c.userType?n.navCtrl.navigateForward("/search"):n.showErrorAlert("Rol de usuario no v\xe1lido.")}else n.showErrorAlert("No se encontraron datos del usuario.")}}catch{n.showErrorAlert("Email y/o password incorrectos")}finally{yield a.dismiss()}})()}navigateToRegister(){this.navCtrl.navigateForward("/register")}}return(t=l).\u0275fac=function(n){return new(n||t)(e.rXU(f.q9),e.rXU(v.u),e.rXU(r.Xi),e.rXU(r.hG))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-login"]],decls:20,vars:3,consts:[[1,"login-content"],[1,"login-container"],[1,"login-card"],[1,"login-header"],["src","assets/iconoapp.png","alt","Logo",1,"logo"],["name","person-outline","slot","start"],["placeholder","Email",3,"ngModelChange","ionInput","ngModel"],["name","lock-closed-outline","slot","start"],["type","password","placeholder","Contrase\xf1a",3,"ngModelChange","ionInput","ngModel"],["expand","full","color","success",3,"click","disabled"],[1,"register-text"],[3,"click"]],template:function(n,o){1&n&&(e.j41(0,"ion-content",0)(1,"div",1)(2,"ion-card",2)(3,"ion-card-header",3),e.nrm(4,"img",4),e.j41(5,"h1"),e.EFF(6,"HOME 4 STUDENTS"),e.k0s()(),e.j41(7,"ion-card-content")(8,"ion-item"),e.nrm(9,"ion-icon",5),e.j41(10,"ion-input",6),e.mxI("ngModelChange",function(i){return e.DH7(o.user,i)||(o.user=i),i}),e.bIt("ionInput",function(){return o.validateForm()}),e.k0s()(),e.j41(11,"ion-item"),e.nrm(12,"ion-icon",7),e.j41(13,"ion-input",8),e.mxI("ngModelChange",function(i){return e.DH7(o.password,i)||(o.password=i),i}),e.bIt("ionInput",function(){return o.validateForm()}),e.k0s()(),e.j41(14,"ion-button",9),e.bIt("click",function(){return o.login()}),e.EFF(15,"INGRESAR"),e.k0s(),e.j41(16,"ion-text",10),e.EFF(17," \xbfNo tienes cuenta? "),e.j41(18,"span",11),e.bIt("click",function(){return o.navigateToRegister()}),e.EFF(19,"Reg\xedstrate"),e.k0s()()()()()()),2&n&&(e.R7$(10),e.R50("ngModel",o.user),e.R7$(3),e.R50("ngModel",o.password),e.R7$(),e.Y8G("disabled",!o.isFormValid))},dependencies:[p.MD,r.bv,r.Jm,r.b_,r.I9,r.ME,r.W9,r.iq,r.$w,r.uz,r.IO,r.Gw,u.YN,u.BC,u.vS],styles:[".login-content[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh;background-color:#f8f8f8}.login-container[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;align-items:center}.login-card[_ngcontent-%COMP%]{width:90%;max-width:400px;padding:20px;text-align:center;border-radius:10px;box-shadow:0 4px 10px #0000001a}.custom-spinner[_ngcontent-%COMP%]   .loading-wrapper[_ngcontent-%COMP%]{background:#000c;color:#fff;border-radius:10px}.custom-spinner[_ngcontent-%COMP%]   .loading-spinner[_ngcontent-%COMP%]{--color: #FFD700}.register-text[_ngcontent-%COMP%]{display:block;text-align:center;margin-top:16px}.register-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#007bff;text-decoration:underline;cursor:pointer;font-weight:600}.register-text[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:hover{color:#0056b3}"]}),l})()}];let P=(()=>{var t;class l{}return(t=l).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[m.iI.forChild(C),m.iI]}),l})(),M=(()=>{var t;class l{}return(t=l).\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[p.MD,u.YN,r.bv,P]}),l})()}}]);